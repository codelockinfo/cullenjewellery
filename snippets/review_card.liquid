{%- liquid
  assign reviewer_name = block.settings.reviewer_name
  assign platform = block.settings.platform
  assign profile_image = block.settings.profile_image
  assign profile_bg_color = block.settings.profile_bg_color | default: '#4285F4'
  assign rating = block.settings.rating
  assign time_ago = block.settings.time_ago
  assign review_text = block.settings.review_text
  assign read_more_link = block.settings.read_more_link
  assign initial_letter = reviewer_name | slice: 0, 1 | upcase
-%}

<div class="review_card">
  <div class="review_card_header">
    {%- if platform == 'google' -%}
      <div class="platform_logo platform_google">
       <img loading="lazy" class="logo svelte-n6w3rd" src="https://cdn.shopify.com/s/files/1/0644/3067/0060/files/Trustpilot_brandmark_center_x100.png?v=1703209158" alt="Trustpilot">
      </div>
    {%- elsif platform == 'trustpilot' -%}
      <div class="platform_logo platform_trustpilot">
        <svg width="120" height="20" viewBox="0 0 120 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M18.518 0L22.853 6.909L30.518 7.854L25.127 13.182L26.618 20.727L18.518 16.818L10.418 20.727L11.909 13.182L6.518 7.854L14.183 6.909L18.518 0Z" fill="#00B67A"/>
          <text x="35" y="14" font-family="Arial, sans-serif" font-size="13" font-weight="600" fill="#00B67A">Trustpilot</text>
        </svg>
      </div>
    {%- endif -%}
  </div>
  
  <div class="review_card_body">
    <div class="reviewer_info">
      <div class="reviewer_avatar">
        {%- if profile_image != blank -%}
          <img src="{{ profile_image | img_url: '100x100' }}" alt="{{ reviewer_name }}" class="profile_image">
        {%- else -%}
          <div class="profile_initial" style="background-color: {{ profile_bg_color }};">
            {{ initial_letter }}
          </div>
        {%- endif -%}
      </div>
      <div class="reviewer_details">
        <div class="reviewer_name">{{ reviewer_name }}</div>
        <div class="review_rating">
          {%- for i in (1..5) -%}
            {%- if i <= rating -%}
              <span class="star filled">★</span>
            {%- else -%}
              <span class="star">★</span>
            {%- endif -%}
          {%- endfor -%}
        </div>
        <div class="review_time">{{ time_ago }}</div>
      </div>
    </div>
    
    <div class="review_content">
      {{ review_text }}
      {%- if read_more_link != blank -%}
        <a href="{{ read_more_link }}" class="read_more_link" target="_blank">Read more</a>
      {%- endif -%}
    </div>
  </div>
</div>

