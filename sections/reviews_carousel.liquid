{%- liquid
  assign sid = section.id
  assign se_stts = section.settings
  assign layout = se_stts.layout
  if layout == 'wrap'
   assign html_layout = '<div class="container">__</div>' | split:'__'
  else
   assign html_layout = '__' | split:'__'
  endif -%}

<div class="nt_se_{{sid}} {{layout}} reviews_carousel_wrapper" style="background-color: {{se_stts.bg_color | default: '#1a4d3a'}};">
  {{-html_layout[0]-}}
  {%- if se_stts.title != blank -%}
    {%- render 'section_title',section:section -%}
  {%- endif -%}
  
  <div class="reviews_carousel js_carousel nt_slider prev_next_{{se_stts.btn_color}} btn_owl_{{se_stts.btn_owl}} dot_owl_{{se_stts.dot_owl}} dot_color_{{se_stts.dot_color}} btn_vi_{{se_stts.btn_vi}}" 
       data-flickity='{"imagesLoaded": 0,"adaptiveHeight": 0, "contain": 0, "groupCells": false, "dragThreshold" : 5, "cellAlign": "left","wrapAround": {{se_stts.loop}},"prevNextButtons": {{se_stts.button}},"percentPosition": 0,"pageDots": {{se_stts.dot}}, "autoPlay" : {% if se_stts.autoplay %}{{ se_stts.au_time | times: 1000 }}{% else %}0{% endif %},"pauseAutoPlayOnHover" : {{se_stts.au_hover}}, "rightToLeft": {{settings.use_rtl}} }'>
    {%- if section.blocks.size > 0 -%}
      {%- for block in section.blocks -%}
        <div class="review_card_cell" style="width: {{se_stts.card_width | default: 400}}px;">
          {%- render 'review_card', block: block -%}
        </div>
      {%- endfor -%}
    {%- else -%}
      {%- render 'no-blocks' -%}
    {%- endif -%}
  </div>
  {{-html_layout[1]-}}
</div>
{%- render 'section_css',classbg:false -%}

{%- schema -%}
  {
    "name": "Reviews Carousel",
    "class": "nt_section type_reviews_carousel type_carousel",
    "max_blocks": 50,
    "settings": [
      {
        "type": "header",
        "content": "== Title Settings"
      },
      {
        "type": "text",
        "id": "title",
        "label": "Heading"
      },
      {
        "type": "textarea",
        "id": "sub_title",
        "label": "Sub Text"
      },
      {
        "type": "select",
        "id": "sub_font",
        "default": "2",
        "options": [
         {
            "value": "1",
            "label": "Body font"
         },
         {
            "value": "2",
            "label": "Sub title font"
          }
        ],
        "label": "Sub Text use font:"
      },
      {
        "type": "select",
        "id": "style_title",
        "options": [
         {
            "value": "title_1",
            "label": "Design 1"
         },
         {
            "value": "title_2",
            "label": "Design 2"
          },
         {
            "value": "title_3",
            "label": "Design 3"
          },
         {
            "value": "title_4",
            "label": "Design 4"
          },
         {
            "value": "title_5 lazyload",
            "label": "Design 5"
          },
         {
            "value": "title_6",
            "label": "Design 6"
          },
         {
            "value": "title_7 +la",
            "label": "Design 7 (with line-awesome)"
          },
         {
            "value": "title_8",
            "label": "Design 8"
          },
         {
            "value": "title_9",
            "label": "Design 9"
          },
         {
            "value": "title_10",
            "label": "Design 10"
          },
         {
            "value": "title_11",
            "label": "Design 11"
          },
         {
            "value": "title_12",
            "label": "Design 12"
          },
         {
            "value": "title_13",
            "label": "Design 13"
          }
        ],
        "label": "Design Title:",
        "default": "title_1"
      },
      {
        "type": "text",
        "id": "ic_tt",
        "label": "Style 7 icon line-awesome",
        "default": "gem"
      },
      {
        "type": "checkbox",
        "id": "show_clpr",
        "label": "Use icon color primary?",
        "default": false
      },
      {
        "type": "header",
        "content": "== General Settings"
      },
      {
        "type": "color",
        "id": "bg_color",
        "label": "Background Color",
        "default": "#1a4d3a"
      },
      {
        "type": "range",
        "id": "card_width",
        "min": 300,
        "max": 500,
        "step": 10,
        "label": "Review Card Width",
        "unit": "px",
        "default": 400
      },
      {
        "type": "header",
        "content": "== Slider Settings"
      },
      {
        "type": "checkbox",
        "id": "loop",
        "label": "Use Loop?",
        "info": "At the end of cells, wrap-around to the other end for infinite scrolling.",
        "default": true
      },
      {
        "type": "range",
        "id": "au_time",
        "min": 0,
        "max": 30,
        "step": 0.5,
        "label": "Autoplay Speed in second.",
        "info": "Set is '0' to disable autoplay.",
        "unit": "sec",
        "default": 0
      },
      {
        "type": "checkbox",
        "id": "autoplay",
        "label": "Enable Autoplay?",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "au_hover",
        "label": "Pause Autoplay On Hover?",
        "info": "Auto-playing will pause when the user hovers over the carousel.",
        "default": true
      },
      {
        "type": "header",
        "content": "== Prev Next Button, Page Dot Settings"
      },
      {
        "type": "paragraph",
        "content": "—————————————————"
      },
      {
        "type": "paragraph",
        "content": "Prev Next Button:"
      },
      {
        "type": "checkbox",
        "id": "button",
        "label": "Enable Prev Next Button?",
        "info": "Creates and enables previous & next buttons.",
        "default": false
      },
      {
        "type": "select",
        "id": "btn_vi",
        "label": "Visible:",
        "default": "1",
        "options": [
          {
            "value": "1",
            "label": "always"
          },
          {
            "value": "2",
            "label": "Only hover"
          }
        ]
      },
      {
        "type": "select",
        "id": "btn_owl",
        "label": "Style",
        "default": "1",
        "options": [
          {
            "value": "1",
            "label": "Style 1"
          },
          {
            "value": "2",
            "label": "Style 2"
          },
          {
            "value": "3",
            "label": "Style 3"
          }
        ]
      },
      {
        "type": "select",
        "id": "btn_color",
        "label": "Color",
        "default": "2",
        "options": [
          {
            "value": "0",
            "label": "Transparent"
          },
          {
            "value": "1",
            "label": "Gray"
          },
          {
            "value": "2",
            "label": "White"
          },
          {
            "value": "3",
            "label": "Primary"
          }
        ]
      },
      {
        "type": "paragraph",
        "content": "—————————————————"
      },
      {
        "type": "paragraph",
        "content": "Page Dot:"
      },
      {
        "type": "checkbox",
        "id": "dot",
        "label": "Enable Page Dot?",
        "info": "Creates and enables page dots.",
        "default": false
      },
      {
        "type": "select",
        "id": "dot_owl",
        "label": "Style",
        "default": "2",
        "options": [
          {
            "value": "1",
            "label": "Style 1"
          },
          {
            "value": "2",
            "label": "Style 2"
          }
        ]
      },
      {
        "type": "select",
        "id": "dot_color",
        "label": "Color",
        "default": "2",
        "options": [
          {
            "value": "1",
            "label": "Dark"
          },
          {
            "value": "2",
            "label": "Light"
          },
          {
            "value": "3",
            "label": "Primary"
          }
        ]
      },
      {
        "type": "header",
        "content": "== Design Options"
      },
      {
        "type": "select",
        "id": "layout",
        "default": "nt_full",
        "label": "Layout",
        "options": [
            { "value": "container", "label": "Container"},
            { "value": "wrap", "label": "Wrapped Container"},
            { "value": "nt_full", "label": "Full Width"}
        ]
      },
      {
        "type": "text",
        "id": "mg",
        "label": "Margin",
        "info":"Margin top, margin right, margin bottom, margin left. If you not use to blank",
        "placeholder": "50px,,50px,"
      },
      {
        "type": "text",
        "id": "pd",
        "label": "Padding",
        "info":"Padding top, padding right, padding bottom, padding left. If you not use to blank",
        "default": "60px,,60px,",
        "placeholder": "50px,,50px,"
      },
     {
        "type": "header",
        "content": "== Design Mobile Options"
      },
      {
        "type": "text",
        "id": "mg_mb",
        "label": "Margin",
        "placeholder": "50px,,50px,"
      },
      {
        "type": "text",
        "id": "pd_mb",
        "label": "Padding",
        "default": "40px,,40px,",
        "placeholder": "50px,,50px,"
      }
    ],
    "blocks": [
      {
        "type": "review",
        "name": "Review",
        "settings": [
          {
            "type": "select",
            "id": "platform",
            "label": "Platform",
            "default": "google",
            "options": [
              {
                "value": "google",
                "label": "Google"
              },
              {
                "value": "trustpilot",
                "label": "Trustpilot"
              }
            ]
          },
          {
            "type": "text",
            "id": "reviewer_name",
            "label": "Reviewer Name",
            "default": "Customer Name"
          },
          {
            "type": "image_picker",
            "id": "profile_image",
            "label": "Profile Image",
            "info": "Optional: Upload profile picture. If not provided, will show initial letter."
          },
          {
            "type": "color",
            "id": "profile_bg_color",
            "label": "Profile Icon Background Color",
            "info": "Used when no profile image is provided",
            "default": "#4285F4"
          },
          {
            "type": "range",
            "id": "rating",
            "min": 1,
            "max": 5,
            "step": 1,
            "label": "Rating",
            "default": 5
          },
          {
            "type": "text",
            "id": "time_ago",
            "label": "Time Since Review",
            "default": "2 days ago",
            "info": "e.g., '2 days ago', '1 week ago', '1 month ago'"
          },
          {
            "type": "richtext",
            "id": "review_text",
            "label": "Review Text",
            "default": "<p>Add your customer review text here. This is a great way to showcase positive feedback from your customers.</p>"
          },
          {
            "type": "url",
            "id": "read_more_link",
            "label": "Read More Link (Optional)"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Reviews Carousel",
        "category": "V. Text",
        "blocks": [
          {"type": "review"},
          {"type": "review"},
          {"type": "review"},
          {"type": "review"},
          {"type": "review"}
        ]
      }
    ]
  }
{% endschema %}

