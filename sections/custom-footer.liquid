<section
  class="custom-footer"
  style="
    background-color: {{ section.settings.bg_color }};
    color: {{ section.settings.text_color }};
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    text-align: {{ section.settings.alignment }};
  "
>
  <div class="page-width">

    {% for block in section.blocks %}
      {% case block.type %}

      {% when 'newsletter' %}
        <div class="footer-block footer-newsletter" {{ block.shopify_attributes }}>
          {% if block.settings.heading != blank %}
            <h3>{{ block.settings.heading }}</h3>
          {% endif %}
          <form method="post" action="/contact#newsletter">
            <input
              type="email"
              name="contact[email]"
              placeholder="{{ block.settings.placeholder }}"
              required
            >
            <button type="submit">{{ block.settings.button_text }}</button>
          </form>
        </div>

      {% when 'social_icons' %}
        <div class="footer-block footer-social" {{ block.shopify_attributes }}>
          <div class="social-icons">
            {% for i in (1..6) %}
              {% assign icon_key = "icon_" | append: i %}
              {% assign link_key = "link_" | append: i %}
              {% assign icon = block.settings[icon_key] %}
              {% assign link = block.settings[link_key] %}

              {% if icon != blank and link != blank %}
                <a href="{{ link }}" target="_blank" aria-label="{{ icon }}">
                  <i class="fa fa-{{ icon }}"></i>
                </a>
              {% endif %}
            {% endfor %}
          </div>
        </div>

      {% when 'menu' %}
        <div class="footer-block footer-menu" {{ block.shopify_attributes }}>
          {% if block.settings.menu != blank %}
            <ul>
              {% for link in block.settings.menu.links %}
                <li><a href="{{ link.url }}">{{ link.title }}</a></li>
              {% endfor %}
            </ul>
          {% endif %}
        </div>

      {% when 'text' %}
        <div class="footer-block footer-text" {{ block.shopify_attributes }}>
          {{ block.settings.text }}
        </div>

      {% when 'custom_html' %}
        <div class="footer-block footer-html" {{ block.shopify_attributes }}>
          {{ block.settings.html }}
        </div>

      {% endcase %}
    {% endfor %}

    {% if section.settings.payment_types != blank %}
      <div class="footer-block footer-payments">
        <div class="payment-icons">
          {% assign payment_array = section.settings.payment_types | remove: ' ' | split: ',' %}
          {% for payment_type in payment_array %}
            {% if payment_type != blank %}
              <img class="lazyload" src="https://cdn.shopify.com/s/assets/payment_icons/generic-dfdcaf09b6731ca14dd7441354c0ad8bc934184eb15ae1fda6a6b9e307675485.svg" data-src="{{ payment_type | payment_type_img_url }}" alt="{{ payment_type | replace: '_', ' ' }}" />
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endif %}

  </div>
</section>
{% schema %}
{
  "name": "Custom Footer (Flexible)",
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#1f6b45"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Content alignment",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 120,
      "step": 4,
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 120,
      "step": 4,
      "default": 40
    },
    {
      "type": "textarea",
      "id": "payment_types",
      "label": "Payment methods",
      "default": "amazon_payments,american_express,apple_pay,bitcoin,dankort,diners_club,discover,dogecoin,dwolla,forbrugsforeningen,interac,google_pay,jcb,klarna,klarna-pay-later,litecoin,maestro,master,paypal,shopify_pay,sofort,visa",
      "info": "Enter payment types separated by commas (e.g., visa,master,paypal,apple_pay)"
    }
  ],
  "blocks": [
    {
      "type": "newsletter",
      "name": "Newsletter",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Ring advice, straight to your inbox"
        },
        {
          "type": "text",
          "id": "placeholder",
          "label": "Email placeholder",
          "default": "Your email address"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button text",
          "default": "Submit"
        }
      ]
    },
    {
      "type": "social_icons",
      "name": "Social Icons",
      "settings": [
        { "type": "text", "id": "icon_1", "label": "Icon 1 (facebook, instagramâ€¦)" },
        { "type": "url", "id": "link_1", "label": "Link 1" },

        { "type": "text", "id": "icon_2", "label": "Icon 2" },
        { "type": "url", "id": "link_2", "label": "Link 2" },

        { "type": "text", "id": "icon_3", "label": "Icon 3" },
        { "type": "url", "id": "link_3", "label": "Link 3" }
      ]
    },
    {
      "type": "menu",
      "name": "Menu",
      "settings": [
        {
          "type": "link_list",
          "id": "menu",
          "label": "Select menu"
        }
      ]
    },
    {
      "type": "text",
      "name": "Text / Description",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "Text"
        }
      ]
    },
    {
      "type": "custom_html",
      "name": "Custom HTML",
      "settings": [
        {
          "type": "html",
          "id": "html",
          "label": "HTML Code"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Footer (All-in-One)"
    }
  ]
}
{% endschema %}
<style>
.custom-footer .footer-block {
  margin-bottom: 25px;
}

.footer-newsletter input {
  padding: 10px;
  width: 250px;
  max-width: 100%;
}

.footer-newsletter button {
  padding: 10px 20px;
  margin-left: 5px;
}

.footer-social a {
  margin: 0 8px;
  font-size: 18px;
}

.footer-menu ul {
  list-style: none;
  padding: 0;
}

.footer-menu li {
  display: inline-block;
  margin: 0 10px;
}

.payment-icons svg {
  height: 28px;
  margin: 4px;
}
</style>
